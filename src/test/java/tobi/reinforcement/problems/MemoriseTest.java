package tobi.reinforcement.problems;

import tobi.reinforcement.DebugUtils;
import tobi.reinforcement.network.Network;

import java.util.Arrays;

class MemoriseTest {
    public static void main(String[] args) {
//        String json = "{\"outputs\":4,\"constValues\":{},\"neuronInputs\":{\"IN#0\":[],\"T1#2e866175\":[{\"strength\":-0.13784615725772653,\"neuron\":\"T1#1b1b5fc1\"}],\"OUT#0\":[{\"strength\":0.0967117531064492,\"neuron\":\"T1#62d7c6a3\"}],\"T1#1b1b5fc1\":[{\"strength\":0.7379538170782397,\"neuron\":\"IN#0\"}],\"OUT#2\":[{\"strength\":0.5034824618572035,\"neuron\":\"OUT#3\"}],\"OUT#1\":[{\"strength\":0.8322187422399921,\"neuron\":\"T1#380739e8\"}],\"T1#6e1cc424\":[{\"strength\":0.655392307936177,\"neuron\":\"T1#1b1b5fc1\"}],\"T1#380739e8\":[{\"strength\":0.22352939911214953,\"neuron\":\"T1#2e866175\"}],\"T1#62d7c6a3\":[{\"strength\":0.18837894166311142,\"neuron\":\"T1#6e1cc424\"}],\"T1#36ef7a81\":[{\"strength\":0.09824844070561667,\"neuron\":\"IN#0\"}],\"OUT#3\":[{\"strength\":0.5423641002650395,\"neuron\":\"T1#36ef7a81\"}]},\"varOutputs\":{\"IN#0\":[],\"T1#2e866175\":[],\"OUT#0\":[],\"T1#1b1b5fc1\":[],\"OUT#2\":[],\"OUT#1\":[],\"T1#6e1cc424\":[],\"T1#380739e8\":[],\"T1#62d7c6a3\":[],\"T1#36ef7a81\":[],\"OUT#3\":[]},\"inputs\":1}";
        String json = "{\"outputs\":5,\"constValues\":{\"CONST#435e43ce\":0,\"CONST#4e1a1061\":-1.994886145319704},\"neuronInputs\":{\"ADD#17d43859\":[{\"strength\":0.8782359078928698,\"neuron\":\"SIN#4dff7783\"},{\"strength\":0.36823709560982787,\"neuron\":\"CONST#4e1a1061\"}],\"RELU#45fe1fec\":[{\"strength\":0.2343181232454179,\"neuron\":\"ABS#66453342\"}],\"MIN#3504e2d3\":[{\"strength\":0.33233020838108596,\"neuron\":\"SIG#7517245d\"},{\"strength\":0.8400073812726112,\"neuron\":\"OUT#0\"}],\"CONST#4e1a1061\":[],\"SIN#72807ef2\":[{\"strength\":0.2241322937924901,\"neuron\":\"MIN#3504e2d3\"}],\"SIN#4dff7783\":[{\"strength\":0.027944175595871257,\"neuron\":\"CONST#4e1a1061\"}],\"IN#0\":[],\"MAX#5a8a12d2\":[{\"strength\":2.2721605485104384,\"neuron\":\"RELU#45fe1fec\"},{\"strength\":0.7617116540145304,\"neuron\":\"CONST#435e43ce\"}],\"ABS#75380e33\":[{\"strength\":0.26892838185605716,\"neuron\":\"CONST#4e1a1061\"}],\"MAX#6c34912d\":[{\"strength\":0.32112427058513393,\"neuron\":\"EXP#64657bd\"},{\"strength\":0.21241509344339116,\"neuron\":\"ABS#75380e33\"}],\"SIG#7517245d\":[{\"strength\":0.9612636270268096,\"neuron\":\"CONST#435e43ce\"}],\"CONST#435e43ce\":[],\"OUT#0\":[{\"strength\":0.243960296318529,\"neuron\":\"ADD#17d43859\"}],\"ABS#66453342\":[{\"strength\":-0.871933002988069,\"neuron\":\"OUT#0\"}],\"EXP#64657bd\":[{\"strength\":0.8270690020815635,\"neuron\":\"SIN#72807ef2\"}],\"OUT#2\":[{\"strength\":0.8095326276612163,\"neuron\":\"OUT#4\"}],\"OUT#1\":[{\"strength\":0.4037717935372429,\"neuron\":\"MAX#5a8a12d2\"}],\"OUT#4\":[{\"strength\":0.8355490659618585,\"neuron\":\"SIN#72807ef2\"}],\"OUT#3\":[{\"strength\":1.9855129289378683,\"neuron\":\"MAX#6c34912d\"}]},\"varOutputs\":{\"ADD#17d43859\":[],\"RELU#45fe1fec\":[],\"MIN#3504e2d3\":[],\"CONST#4e1a1061\":[],\"SIN#72807ef2\":[],\"SIN#4dff7783\":[],\"IN#0\":[],\"MAX#5a8a12d2\":[],\"ABS#75380e33\":[],\"MAX#6c34912d\":[],\"SIG#7517245d\":[],\"CONST#435e43ce\":[],\"SIN#705f300b\":[],\"OUT#0\":[],\"ABS#66453342\":[],\"EXP#64657bd\":[],\"OUT#2\":[],\"OUT#1\":[],\"OUT#4\":[],\"OUT#3\":[]},\"inputs\":1}";
//        String json2 = "{\"outputs\":4,\"constValues\":{},\"neuronInputs\":{\"IN#0\":[],\"VAR#37fdd626\":[],\"OUT#0\":[{\"strength\":0.17236745346205729,\"neuron\":\"VAR#71dd492c\"}],\"VAR#71dd492c\":[],\"OUT#2\":[{\"strength\":0.8675902785267354,\"neuron\":\"VAR#37fdd626\"}],\"OUT#1\":[{\"strength\":0.5787639596681496,\"neuron\":\"VAR#4c39ec4d\"}],\"VAR#4c39ec4d\":[],\"OUT#3\":[{\"strength\":0.28617609713665526,\"neuron\":\"IN#0\"}]},\"varOutputs\":{\"IN#0\":[\"VAR#37fdd626\"],\"VAR#37fdd626\":[],\"OUT#0\":[],\"VAR#71dd492c\":[],\"OUT#2\":[\"VAR#4c39ec4d\"],\"OUT#1\":[\"VAR#71dd492c\",\"VAR#4c39ec4d\"],\"VAR#4c39ec4d\":[],\"OUT#3\":[\"VAR#37fdd626\"]},\"inputs\":1}";
        Network network = Network.parse(json);
//        Network network2 = Network.parse(json2);
        network.compute(12);
        network.compute(1);
        network.compute(6);
        System.out.println(Arrays.toString(network.compute(-3)));
//        DebugUtils.showGraph(network);
//        DebugUtils.showGraph(network2);
    }
}